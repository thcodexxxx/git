# 株式管理ダッシュボード

日本株、米国株、投資信託を一元管理できるStreamlitアプリケーションです。資産の評価額、損益状況、ポートフォリオの構成比（ヒートマップ）などを直感的に把握できます。

## 特徴
*   **マルチポートフォリオ**: 「保有株式」と「仮想保有株式」の2つを管理可能。
*   **自動データ取得**: 株価は `yfinance`、投資信託はYahoo!ファイナンスから自動取得。
*   **可視化**: Plotlyによる資産ヒートマップ、Matplotlibによる個別銘柄のチャート表示。
*   **キャッシュ機能**: 投資信託データのキャッシュにより、読み込み速度を最適化。

## セットアップ

### 1. 前提条件
*   Python 3.8以上
*   インターネット接続 (株価データの取得に必要)

### 2. インストール
リポジトリをクローンまたはダウンロードし、必要なライブラリをインストールします。

```bash
cd kabu
pip install -r requirements.txt
```

## 使い方

### アプリケーションの起動
以下のコマンドでStreamlitアプリを起動します。

```bash
streamlit run stock_app.py
```

ブラウザが立ち上がり、ダッシュボードが表示されます (通常は `http://localhost:8501`)。

### ポートフォリオの登録
1.  **ポートフォリオ選択**: サイドバー上部のラジオボタンで「保有株式」または「仮想保有株式」を選択します。
2.  **データの入力**: メイン画面のテーブルにお持ちの銘柄情報を入力します。
    *   **コード**:
        *   日本株: `7203.T` (トヨタ自動車) のように `.T` を付けます。
        *   米国株: `AAPL` (Apple), `MSFT` (Microsoft) などのティッカーシンボル。
        *   投資信託: Yahoo!ファイナンスのファンドコード (例: `01314184` ... ｅＭＡＸＩＳ Ｓｌｉｍ 米国株式（Ｓ＆Ｐ５００）)。
    *   **購入単価**: 平均取得単価 (円またはドル)。投資信託は1万口あたりの単価。
    *   **購入日**: `YYYY-MM-DD` 形式。
    *   **保有株数**: 株数 (投資信託の場合は口数)。

データは自動的に `portfolio_main.csv` または `portfolio_sub.csv` に保存されます。

## ファイル構成
*   `stock_app.py`: アプリケーション本体
*   `specification.md`: 詳細仕様書
*   `stock_data_cache/`: 取得した投資信託データのキャッシュ

## 注意事項
*   投資信託のデータはスクレイピングで取得しているため、対象サイトの仕様変更により取得できなくなる場合があります。
*   サイドバーの「キャッシュを削除して再取得」ボタンで、キャッシュをクリアして最新データを強制取得できます。
